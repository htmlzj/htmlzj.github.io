<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>臻善年会邀请函</title>

    <link rel="stylesheet" href="./js/animate.min.css">
    <link rel="stylesheet" href="./js/swiper-3.4.2.min.css">
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="js/jquery/dist/jquery.min.js"></script>
    <script src="js/swiper-3.4.2.min.js"></script>
    <script src="js/swiper.animate1.0.2.min.js"></script>
    <script src="js/main.js"></script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<img src="img/logo.png" height="0" width="0" style="display: block;"/>
<img src="./img/箭头.png" class="jt">
<div id="fpMusic" >
    <audio  src="./img/bg.mp3" preload="preload" loop="loop" id="fpMusicAudio"></audio>

    <div id="fpMusicPlay">
        <div id="fpMusicPlayBtn"></div>
    </div>
</div>
      <div class="swiper-container swiper-container-v">
    <div class="swiper-wrapper">
        <div class="swiper-slide black">
            <img src="./img/01.gif" class="gif1" alt="">
        </div>
        <div class="swiper-slide">
            <img src="img/1/1.png" class="keep" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/2.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/3.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/4.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/5.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".3s" />               
                <img src="img/1/6.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/7.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/8.png" class="ani" swiper-animate-effect="fadeInRight"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/10.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/9.png" class="ani" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/11.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/12.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/13.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/14.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/15.png" class="ani keep" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
        </div>
        <div class="swiper-slide black">
                <img src="" class="gif2" alt="">
            </div>
        <div class="swiper-slide">
                <img src="img/1/1.png" class="keep" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/2.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/3.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/4.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/5.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".3s" />               
                <img src="img/1/6.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/10.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/2/1.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/12.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/13.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/14.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/15.png" class="ani keep" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/2/5.png" class="ani" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
            <div class="swiper-container swiper-container-h swiper-container-horizontal">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                        <img src="img/2/2.png" class="ani" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="1.5s" />
                  </div>
                  <div class="swiper-slide">
                        <img src="img/2/3.png" class="" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                  </div>
                  <div class="swiper-slide">
                        <img src="img/2/4.png" class="" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                  </div>

                </div>
              </div>
        </div>
        <div class="swiper-slide">
                <img src="img/1/1.png" class="keep" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/2.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/3.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/4.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/5.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".3s" />               
                <img src="img/1/6.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/10.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/3/1.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/12.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/13.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/14.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/15.png" class="ani keep" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/3/4.png" class="ani" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
            <div class="swiper-container swiper-container-h2 swiper-container-horizontal" >
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                        <img src="img/3/2.png" class="ani" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="1.5s" />
                  </div>
                  <div class="swiper-slide">
                        <img src="img/3/3.png" class="ani" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                  </div>

                </div>
              </div>

        </div>
        <div class="swiper-slide">
                <img src="img/1/1.png" class="keep" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/2.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/3.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/4.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/5.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".3s" />               
                <img src="img/1/6.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/10.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/4/1.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/12.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/13.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/14.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/15.png" class="ani keep" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                    <img src="img/4/2.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="s" />
                    <img src="img/4/3.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.3s" />
                    <img src="img/4/4.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.6s" />
        </div>
        <div class="swiper-slide black">
                <img src="" class="gif3" alt="">
            </div>
        <div class="swiper-slide">
                <img src="img/1/1.png" class="keep" swiper-animate-effect="fadeIn"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/2.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/3.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/4.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".6s" />
                <img src="img/1/5.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay=".3s" />               
                <img src="img/1/6.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                <img src="img/1/10.png" class="ani" swiper-animate-effect="fadeInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/5/1.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/12.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/13.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/14.png" class="ani" swiper-animate-effect="slideInleft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                <img src="img/1/15.png" class="ani keep" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />

                    <img src="img/5/2.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                    <img src="img/5/3.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.3s" />
                    <img src="img/5/4.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.6s" />
                    <img src="img/5/5.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.6s" />
        </div>
        <div class="swiper-slide">
                    <img src="img/6/5.png" class="keep" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                    <img src="img/6/1.png" class="ani" swiper-animate-effect="fadeInDown"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                    <img src="img/6/2.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0s" />
                    <img src="img/6/3.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.3s" />
                    <img src="img/6/4.png" class="ani" swiper-animate-effect="slideInLeft"swiper-animate-duration="1.5s" swiper-animate-delay="0.6s" />

                    <img src="img/6/6.png" class="ani keep" swiper-animate-effect="fadeInUp"swiper-animate-duration="1.5s" swiper-animate-delay="0s" onclick="location.href='https://baidu.com'"/>
        </div>

        
    </div>
</div>
<div></div>
<div class="mengban">
    <img src="./img/logo1.png" alt="">
    <span class="nut">0%</span>
</div>
<script egret="lib" type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>



<script>
    var timer = null;
    var imgarr=document.querySelectorAll("img");
    var cut=0;
    var zz=true;
    var imgcut=imgarr.length;

  
    function share(){
        wx.closeWindow();
    }
    if(location.href!=location.href.split('?')[0]){
        location.href=location.href.split('?')[0];
    }

    $.ajax({url:'https://zhuangjianlol.cn/getwx?url='+location.href.split('?')[0],
        success:function(data){
            console.log(data);
            wx.config(data);
            wx.ready(function(){
                //console.log(1111);
                wx.onMenuShareAppMessage({
                    title: '臻善年会邀请函', // 分享标题
                    desc: '2019年1月7日', // 分享描述
                    link: 'https://zhuangjianlol.cn/yqh/', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                    imgUrl: 'https://zhuangjianlol.cn/yqh/img/logo.png', // 分享图标
                    type: '', // 分享类型,music、video或link，不填默认为link
                    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                    success: function () {
                        // 用户确认分享后执行的回调函数
                        //alert('分享成功');
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数

                    }
                });
                wx.onMenuShareTimeline({
                    title: '臻善年会邀请函', // 分享标题
                    link: 'https://zhuangjianlol.cn/yqh/', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                    imgUrl: 'https://zhuangjianlol.cn/yqh/img/logo.png', // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                wx.checkJsApi({
                    jsApiList: ['chooseImage'],
                    success: function(res) {
                    }

                });
                // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。



            });
            wx.error(function(res){
                console.log(res);
                // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
            });

        }})

    $(function(){

            
        $(".gif1").get(0).stop()
        $(".gif2").get(0).stop()
        $(".gif3").get(0).stop()
        if(window.screen.height>800){
            includeLinkStyle("./css/ipx.css");
        }
        function includeLinkStyle(url) {
            var link = document.createElement("link");
            link.rel = "stylesheet";
            link.type = "text/css";
            link.href = url;
            document.getElementsByTagName("head")[0].appendChild(link);
            }
 
    	var swiper = new Swiper('.swiper-container-v', {
                paginationClickable: true,
                direction: 'vertical',
                nextButton: '.swiper-button-next',
                centeredSlides: true,
                loop:true,
                onInit: function(swiper) { //Swiper2.x的初始化是onFirstInit
                    swiperAnimateCache(swiper); //隐藏动画元素
                    swiperAnimate(swiper); //初始化完成开始动画
                },
                onSlideChangeEnd: function(swiper) {
                    console.log(swiper.activeIndex)
                    clearTimeout(timer)
                    $(".swiper-container-h2").css("opacity",0)
                    $(".swiper-container-h").css("opacity",0)
                    // mySwiper.slideNext(runCallbacks, speed)
                    switch(swiper.activeIndex){
                            case 1:
                                if(zz){
                                    break;
                                }
                                $(".gif1")[0].play()
                                timer=setTimeout(function(){
                                    console.log(22)
                                    swiper.slideNext()
                                    $(".gif1")[0].stop()
                                },5020)
                            break;
                            case 3:
                            $(".gif2")[0].play()
                            timer=setTimeout(function(){
                                    swiper.slideNext()
                                    $(".gif2")[0].stop()
                                },3180)
                            break;
                            case 7:
                            $(".gif3")[0].play()
                            timer=setTimeout(function(){
                                    swiper.slideNext()
                                    $(".gif3")[0].stop()
                                },9180)
                            break;
                            case 4:
                                 $(".swiper-container-h").css("opacity",1)
                                 break;
                            case 5:
                                 $(".swiper-container-h2").css("opacity",1)
                                 break;
                            case 2:
                                zz=false;
                                break;

                            default:

                            break;    
                            
                    }
                    swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
                }
            });
        // $(".mengban").hide()
        //         $(".gif1").get(0).play()
        //         clearTimeout(timer)
        //         timer=setTimeout(function(){
        //                             swiper.slideNext()
        //                             $(".gif1")[0].stop()
        //                         },5020)
            for(a of imgarr){
        var IMG = new Image();
        IMG.src=a.src;
        IMG.onload=function(){
            cut++;
            console.log(this)
            let nut = Math.round((cut/imgcut)*100);
            $(".nut").html(nut+"%")
            if(nut>=98){
                $(".mengban").hide()
                $(".gif2").get(0).src="./img/02.gif"
                $(".gif3").get(0).src="./img/03.gif"
                $(".gif1").get(0).play()
                setTimeout(function(){
                    zz=false
                },1000)
                clearTimeout(timer)
                timer=setTimeout(function(){
                                    console.log(11)
                                    swiper.slideNext()
                                    $(".gif1")[0].stop()
                                },5020)
            }

        }
    }
            var swiper2 = new Swiper('.swiper-container-h', {
                paginationClickable: true,
                direction: 'horizontal',
                nextButton: '.swiper-button-next',
                centeredSlides: true,
                loop:true,
                autoplay:3000,
                pagination: {
                    el: '.swiper-pagination-h2',
                    clickable: true,
                },
                // onInit: function(swiper) { //Swiper2.x的初始化是onFirstInit
                //     swiperAnimateCache(swiper); //隐藏动画元素
                //     swiperAnimate(swiper); //初始化完成开始动画
                // },
                // onSlideChangeEnd: function(swiper) {
                //     swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
                // }
      
            });
            var swiper3 = new Swiper('.swiper-container-h2', {
                paginationClickable: true,
                direction: 'horizontal',
                nextButton: '.swiper-button-next',
                centeredSlides: true,
                loop:true,
                autoplay:3000,
                pagination: {
                    el: '.swiper-pagination-h',
                    clickable: true,
                },
                // onInit: function(swiper) { //Swiper2.x的初始化是onFirstInit
                //     swiperAnimateCache(swiper); //隐藏动画元素
                //     swiperAnimate(swiper); //初始化完成开始动画
                // },
                // onSlideChangeEnd: function(swiper) {
                //     swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
                // }
      
            });
    	

    })
        
    // $(".swiper-container-h2").hide()
    // $(".swiper-container-h").hide()
            

        function audioAutoPlay(id) {
            var audio = document.getElementById(id),
                    play = function () {
                        audio.play();
                        document.removeEventListener("touchstart", play, false);
                    };
            audio.play();
            document.addEventListener("WeixinJSBridgeReady", function () {
                play();
            }, false);
            document.addEventListener('YixinJSBridgeReady', function () {
                play();
            }, false);
            document.addEventListener("touchstart", play, false);
        }
        audioAutoPlay('fpMusicAudio');

    </script>
</body>
</html>